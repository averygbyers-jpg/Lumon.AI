<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Lumon</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- Left rail + handle -->
  <div class="sidebar-rail"></div>
  <div id="sidebar-handle" class="sidebar-handle">
    <span class="sidebar-handle-icon">&gt;</span>
  </div>

  <!-- Left sidebar with profile + sessions -->
  <aside id="sidebar-panel" class="sidebar-panel">
    <!-- Profile chip -->
    <div class="sidebar-profile">
      <button id="profile-btn" class="profile-chip" type="button">
        <div class="profile-avatar-circle">
          <span id="profile-avatar-initial">U</span>
        </div>
        <div class="profile-chip-text">
          <div id="profile-chip-name" class="profile-chip-name">Your profile</div>
          <div class="profile-chip-sub">View profile</div>
        </div>
      </button>
    </div>

    <!-- Sessions header -->
    <div class="sidebar-header">
      <div style="display: flex; align-items: center; gap: 6px;">
        <div class="sidebar-title">Sessions</div>
        <button id="sessions-menu-btn" class="sidebar-menu-btn" type="button" title="View archived and deleted">‚ñº</button>
      </div>
      <button id="new-chat-btn" class="sidebar-new-chat" type="button">+</button>
    </div>

    <!-- Sessions menu dropdown -->
    <div id="sessions-menu" class="sessions-menu hidden">
      <button id="menu-archived-btn" class="sessions-menu-item" type="button">
        <span class="menu-item-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#8B6914" stroke-width="2"><path d="M4 7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1"></path><path d="M4 7l1 14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2l1-14"></path><line x1="9" y1="11" x2="9" y2="17"></line><line x1="15" y1="11" x2="15" y2="17"></line></svg></span>
        <span>Archived Sessions</span>
      </button>
      <button id="menu-deleted-btn" class="sessions-menu-item" type="button">
        <span class="menu-item-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#8B6914" stroke-width="2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg></span>
        <span>Deleted Sessions</span>
      </button>
    </div>

    <div id="conversation-list" class="conversation-list"></div>

    <!-- Sidebar footer: settings button -->
    <button id="sidebar-settings-btn" class="sidebar-settings-btn" type="button">
      <span class="settings-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#8B6914" stroke-width="2"><circle cx="12" cy="12" r="3"></circle><path d="M12 1v6m0 6v6M4.22 4.22l4.24 4.24m3.08 3.08l4.24 4.24M1 12h6m6 0h6M4.22 19.78l4.24-4.24m-3.08-3.08l-4.24-4.24M19.78 19.78l-4.24-4.24m-3.08-3.08l-4.24-4.24M19.78 4.22l-4.24 4.24m-3.08 3.08l-4.24 4.24"></path></svg></span>
      <div class="settings-btn-text">
        <div class="settings-btn-label">Settings</div>
      </div>
    </button>
  </aside>

  <!-- RIGHT Prompt Coach tab + panel -->
  <div id="prompt-coach-tab" class="prompt-coach-tab" title="Prompt Coach">
    <div class="prompt-coach-tab-label">Prompt Coach</div>
  </div>

  <aside id="prompt-coach-panel" class="prompt-coach-panel hidden" aria-label="Prompt Coach">
    <div class="prompt-coach-inner">
      <div class="prompt-coach-header">
        <div class="prompt-coach-title">Prompt Coach</div>
        <button id="prompt-coach-close" class="prompt-coach-close" type="button" aria-label="Dismiss coach">‚úï</button>
      </div>

      <div id="prompt-coach-body" class="prompt-coach-body">
        <div class="prompt-coach-muted">
          When Lumon needs more detail to help responsibly, suggestions will appear here.
        </div>
      </div>
    </div>
  </aside>

  <!-- Settings modal (NEW) -->
  <div id="settings-modal" class="center-modal hidden" aria-hidden="true">
    <div class="center-modal-backdrop"></div>
    <div class="center-modal-content" role="dialog" aria-modal="true" aria-label="Settings">
      <div class="center-modal-header">
        <h2 class="center-modal-title">Settings</h2>
        <button id="settings-close-btn" class="center-modal-close" type="button">‚úï</button>
      </div>

      <!-- Settings tabs -->
      <div class="settings-tabs">
        <button class="settings-tab active" data-tab="appearance" type="button">Appearance</button>
        <button class="settings-tab" data-tab="profile" type="button">Profile</button>
        <button class="settings-tab" data-tab="ai-model" type="button">AI Model</button>
        <button class="settings-tab" data-tab="privacy" type="button">Privacy</button>
        <button class="settings-tab" data-tab="notifications" type="button">Notifications</button>
        <button class="settings-tab" data-tab="memories" type="button">Memories</button>
        <button class="settings-tab" data-tab="about" type="button">About</button>
      </div>

      <div class="center-modal-body">
        <!-- Appearance tab -->
        <div class="settings-tab-content active" id="tab-appearance">
          <div class="settings-section">
            <div class="settings-label">Theme</div>
            <div class="settings-row">
              <div class="settings-option">
                <label class="settings-option-label">
                  <input type="radio" name="theme" value="light" id="theme-light" checked>
                  <span>Light Mode</span>
                </label>
              </div>
              <div class="settings-option">
                <label class="settings-option-label">
                  <input type="radio" name="theme" value="dark" id="theme-dark">
                  <span>Dark Mode</span>
                </label>
              </div>
            </div>
          </div>
        </div>

        <!-- Profile tab -->
        <div class="settings-tab-content" id="tab-profile">
          <div class="settings-section">
            <div class="settings-label">Display Name</div>
            <div class="settings-row">
              <input id="profile-name-input-settings" class="settings-text-input" type="text" placeholder="What should Lumon call you?">
            </div>
          </div>
          
          <div class="settings-section">
            <div class="settings-label">Avatar</div>
            <div class="settings-row">
              <div id="profile-avatar-settings" class="profile-avatar-large-settings">
                <span id="profile-avatar-initial-settings">U</span>
              </div>
            </div>
          </div>

          <div class="settings-section">
            <div class="settings-label">Account Actions</div>
            <div class="settings-row">
              <button id="settings-delete-account-btn" class="settings-danger-btn" type="button">
                Delete account &amp; local data
              </button>
              <span class="settings-note">This action cannot be undone.</span>
            </div>
          </div>
        </div>

        <!-- AI Model tab -->
        <div class="settings-tab-content" id="tab-ai-model">
          <div class="settings-section">
            <div class="settings-label">Response Tone</div>
            <div class="settings-row">
              <div class="settings-option">
                <label class="settings-option-label">
                  <input type="radio" name="tone" value="casual" id="tone-casual">
                  <span>Casual</span>
                </label>
              </div>
              <div class="settings-option">
                <label class="settings-option-label">
                  <input type="radio" name="tone" value="formal" id="tone-formal" checked>
                  <span>Formal</span>
                </label>
              </div>
              <div class="settings-option">
                <label class="settings-option-label">
                  <input type="radio" name="tone" value="friendly" id="tone-friendly">
                  <span>Friendly</span>
                </label>
              </div>
            </div>
          </div>

          <div class="settings-section">
            <div class="settings-label">Response Length</div>
            <div class="settings-row">
              <div class="settings-option">
                <label class="settings-option-label">
                  <input type="radio" name="length" value="concise" id="length-concise">
                  <span>Concise</span>
                </label>
              </div>
              <div class="settings-option">
                <label class="settings-option-label">
                  <input type="radio" name="length" value="balanced" id="length-balanced" checked>
                  <span>Balanced</span>
                </label>
              </div>
              <div class="settings-option">
                <label class="settings-option-label">
                  <input type="radio" name="length" value="detailed" id="length-detailed">
                  <span>Detailed</span>
                </label>
              </div>
            </div>
          </div>
        </div>

        <!-- Privacy tab -->
        <div class="settings-tab-content" id="tab-privacy">
          <div class="settings-section">
            <div class="settings-label">Data Storage</div>
            <div class="settings-row">
              <label class="settings-checkbox-label">
                <input type="checkbox" id="privacy-local-storage" checked>
                <span>Store conversations locally in browser</span>
              </label>
              <span class="settings-note">Conversations are only saved on this device.</span>
            </div>
          </div>

          <div class="settings-section">
            <div class="settings-label">Data Management</div>
            <div class="settings-row">
              <button id="clear-all-data-btn" class="settings-secondary-btn" type="button">
                Clear All Conversations
              </button>
              <span class="settings-note">This will permanently delete all your conversations.</span>
            </div>
          </div>
        </div>

        <!-- Notifications tab -->
        <div class="settings-tab-content" id="tab-notifications">
          <div class="settings-section">
            <div class="settings-label">Notification Preferences</div>
            <div class="settings-row">
              <label class="settings-checkbox-label">
                <input type="checkbox" id="notif-session-tips" checked>
                <span>Helpful tips during sessions</span>
              </label>
            </div>
            <div class="settings-row">
              <label class="settings-checkbox-label">
                <input type="checkbox" id="notif-prompts" checked>
                <span>Suggestions to improve prompts</span>
              </label>
            </div>
          </div>
        </div>

        <!-- About tab -->
        <div class="settings-tab-content" id="tab-about">
          <div class="about-lumon-section">
            <div class="about-header">
              <h2 class="about-title">Lumon</h2>
              <p class="about-subtitle">A Focused AI Workspace for Thoughtful Work</p>
            </div>

            <div class="about-content">
              <div class="about-block">
                <p>Lumon is a focused AI workspace designed to help you think more clearly, prompt more effectively, and make real progress on what you're working on.</p>
                
                <p>Unlike general-purpose chatbots, Lumon is built around <strong>intent and learning</strong>. It adapts to who you are, remembers everything you tell it‚Äîeven across different sessions‚Äîand teaches you how to interact with AI more effectively while giving you fast, focused help.</p>
              </div>

              <div class="about-block">
                <h3>What makes Lumon different</h3>
                <ul class="about-list">
                  <li><strong>Remembers everything:</strong> Your entire conversation history and preferences persist across all sessions. Lumon knows your context, your goals, and how you like to work‚Äîalways.</li>
                  <li><strong>Teaches you to prompt better:</strong> Built-in feedback helps you refine your questions and get better results. Learning how to use AI effectively is part of the experience.</li>
                  <li><strong>Speed meets substance:</strong> Quick, direct answers without sacrificing clarity. Convenience and helpfulness work together.</li>
                </ul>
              </div>

              <div class="about-block">
                <h3>What Lumon helps you with</h3>
                <ul class="about-list">
                  <li>Turning vague ideas into clear, actionable plans</li>
                  <li>Learning to ask better questions and refining your thinking</li>
                  <li>Working through complex problems without being overwhelmed</li>
                  <li>Getting structured help matched to your experience level</li>
                </ul>
              </div>

              <div class="about-block">
                <h3>How Lumon works</h3>
                <ul class="about-list">
                  <li>Remembers your goals, context, and preferences across all sessions</li>
                  <li>Teaches you how to prompt more effectively as you go</li>
                  <li>Provides quick, honest, and structured responses</li>
                  <li>Encourages progress through intentional interaction</li>
                </ul>
              </div>

              <div class="about-block">
                <h3>What Lumon is not</h3>
                <ul class="about-list">
                  <li>A replacement for your judgment or creativity</li>
                  <li>A black-box authority that pretends certainty when it doesn't have it</li>
                  <li>A generic chatbot optimized for endless conversation</li>
                </ul>
              </div>

              <div class="about-block">
                <p>Lumon is meant to feel less like "talking to an AI" and more like working alongside a calm, thoughtful assistant‚Äîone that helps you move forward with confidence, intention, and the skills to use AI effectively.</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Memories tab -->
        <div class="settings-tab-content" id="tab-memories">
          <div class="settings-section">
            <div class="settings-label">Cross-Conversation Memories</div>
            <p style="font-size: 13px; color: var(--text-soft); margin-bottom: 16px;">Lumon learns about you across conversations and remembers personal details you share.</p>
            
            <div style="margin-bottom: 12px;">
              <span style="font-size: 12px; font-weight: 500; color: #8B6914;">Total memories: <span id="memory-count">0</span></span>
            </div>

            <div id="memories-list" style="max-height: 300px; overflow-y: auto; border: 1px solid rgba(211, 196, 180, 0.3); border-radius: 8px; padding: 12px; background: rgba(211, 196, 180, 0.05);">
              <div style="text-align: center; color: var(--text-soft); font-size: 12px; padding: 20px;">
                <p>Memories will appear here as Lumon learns about you</p>
              </div>
            </div>

            <button id="clear-all-memories-btn" class="secondary-button" type="button" style="margin-top: 12px; width: 100%;">
              Clear All Memories
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Profile panel -->
  <div id="profile-panel" class="profile-panel hidden">
    <div class="profile-panel-inner">
      <div class="profile-panel-header">
        <div class="profile-avatar-large">
          <span id="profile-avatar-large-initial">U</span>
        </div>
        <div class="profile-name-block">
          <div class="profile-panel-label-sm">Display name</div>
          <input
            id="profile-name-input"
            class="profile-name-input"
            type="text"
            placeholder="What should Lumon call you?"
          />
        </div>
      </div>

      <div class="profile-panel-section">
        <div class="profile-panel-label">Connections</div>
        <button class="profile-option profile-option-disabled" type="button">
          Connect Google <span class="profile-option-tag">Soon</span>
        </button>
        <button class="profile-option profile-option-disabled" type="button">
          Connect X <span class="profile-option-tag">Soon</span>
        </button>
      </div>

      <div class="profile-panel-footer">
        <button
          id="profile-delete-account-btn"
          class="profile-danger-btn"
          type="button"
        >
          Delete account &amp; local data
        </button>
        <button
          id="profile-close-btn"
          class="profile-close-btn"
          type="button"
        >
          Close
        </button>
      </div>
    </div>
  </div>

  <!-- Archived chats modal -->
  <div id="archive-panel" class="center-modal hidden" aria-hidden="true">
    <div class="center-modal-backdrop"></div>
    <div class="center-modal-content" role="dialog" aria-modal="true" aria-label="Archived sessions">
      <div class="center-modal-header">
        <h2 class="center-modal-title">Archived Sessions</h2>
        <button id="archive-close-btn" class="center-modal-close" type="button">‚úï</button>
      </div>

      <div class="center-modal-body">
        <div id="archive-list" class="modal-list">
          No archived sessions yet.
        </div>
      </div>

      <div class="center-modal-footer">
        <button id="archive-done-btn" class="primary-button" type="button">Done</button>
      </div>
    </div>
  </div>

  <!-- Trash modal -->
  <div id="trash-panel" class="center-modal hidden" aria-hidden="true">
    <div class="center-modal-backdrop"></div>
    <div class="center-modal-content" role="dialog" aria-modal="true" aria-label="Deleted sessions">
      <div class="center-modal-header">
        <h2 class="center-modal-title">Deleted Sessions</h2>
        <button id="trash-close-btn" class="center-modal-close" type="button">‚úï</button>
      </div>

      <div class="center-modal-body">
        <div class="modal-subtitle">Sessions in trash are retained for 30 days.</div>
        <div id="trash-list" class="modal-list">
          No deleted sessions yet.
        </div>
      </div>

      <div class="center-modal-footer">
        <button id="trash-done-btn" class="primary-button" type="button">Done</button>
      </div>
    </div>
  </div>

  <!-- Delete account modal (RESTORED checkbox) -->
  <div id="delete-modal" class="full-modal hidden">
    <div class="full-modal-backdrop"></div>
    <div class="full-modal-content">
      <h2 class="full-modal-title">Delete Lumon data?</h2>
      <p class="full-modal-text">
        This will remove your profile and all local conversations on this device.
        This action cannot be undone.
      </p>

      <label class="delete-confirm-row">
        <input id="delete-confirm-checkbox" type="checkbox" />
        <span>I understand this will delete everything locally.</span>
      </label>

      <div class="full-modal-actions">
        <button
          id="delete-modal-cancel"
          class="full-modal-btn cancel"
          type="button"
        >
          Cancel
        </button>
        <button
          id="delete-modal-confirm"
          class="full-modal-btn danger"
          type="button"
          disabled
        >
          Delete everything
        </button>
      </div>
    </div>
  </div>

  <!-- Delete progress / abort modal (RESTORED) -->
  <div id="delete-progress-modal" class="center-modal hidden" aria-hidden="true">
    <div class="center-modal-backdrop"></div>
    <div class="center-modal-content delete-progress-content" role="dialog" aria-modal="true" aria-label="Deleting data">
      <div class="center-modal-header">
        <h2 class="center-modal-title">Deleting data‚Ä¶</h2>
        <button id="delete-progress-abort-header" class="delete-progress-abort-header-btn" type="button">Abort</button>
      </div>

      <div class="center-modal-body">
        <p class="delete-progress-text">
          Removing local profile + conversations. You can abort if you clicked this by accident.
        </p>

        <div class="progress-bar">
          <div id="delete-progress-fill" class="progress-fill" style="width: 0%;"></div>
        </div>

        <div class="delete-progress-meta">
          <span id="delete-progress-pct">0%</span>
          <span id="delete-progress-status">Preparing‚Ä¶</span>
        </div>
      </div>

      <div class="center-modal-footer" style="display: none;">
        <button id="delete-progress-abort-btn" class="full-modal-btn cancel" type="button">Abort</button>
      </div>
    </div>
  </div>

  <!-- Header -->
  <header class="app-header">
    <div class="app-header-inner">
      <div class="app-logo-mark"></div>
      <div class="app-title-block">
        <h1 class="app-title">Lumon</h1>
        <p class="app-subtitle">Illuminate your thinking.</p>
      </div>
    </div>
  </header>

  <!-- Main area -->
  <main class="app-main">
    <!-- Onboarding screen -->
    <section id="onboarding-screen" class="onboarding-screen">
      <!-- Step 1: Welcome/What is Lumon -->
      <div id="onboard-step-1" class="onboarding-card onboarding-step active">
        <div class="onboarding-splash">
          <h1 class="splash-title">Lumon</h1>
          <p class="splash-subtitle">Your Personal AI Thinking Partner</p>
          
          <div class="splash-description">
            <p>Lumon is a private, intelligent space designed to help you:</p>
            <div class="features-list">
              <div class="feature-item">
                <span class="feature-icon">‚úì</span>
                <span>Master the art of prompting</span>
              </div>
              <div class="feature-item">
                <span class="feature-icon">‚úì</span>
                <span>Think through complex problems</span>
              </div>
              <div class="feature-item">
                <span class="feature-icon">‚úì</span>
                <span>Unlock AI's fullest potential</span>
              </div>
            </div>
          </div>

          <button id="learn-more-toggle" class="learn-more-toggle" type="button">
            Learn More About Lumon
          </button>

          <div id="learn-more-content" class="learn-more-content hidden">
            <div class="about-lumon-detail">
              <p><strong>Lumon</strong> is a focused AI workspace designed to help you think more clearly, prompt more effectively, and make real progress on what you're working on.</p>
              
              <p>Unlike general-purpose chatbots, Lumon is built around <strong>intent and learning</strong>. It adapts to who you are, remembers everything you tell it‚Äîeven across different sessions‚Äîand teaches you how to interact with AI more effectively while giving you fast, focused help.</p>
              
              <h4>What makes Lumon different</h4>
              <ul>
                <li><strong>Remembers everything:</strong> Your entire conversation history and preferences persist across all sessions. Lumon knows your context, your goals, and how you like to work‚Äîalways.</li>
                <li><strong>Teaches you to prompt better:</strong> Built-in feedback helps you refine your questions and get better results. Learning how to use AI effectively is part of the experience.</li>
                <li><strong>Speed meets substance:</strong> Quick, direct answers without sacrificing clarity. Convenience and helpfulness work together.</li>
              </ul>

              <h4>What Lumon helps you with</h4>
              <ul>
                <li>Turning vague ideas into clear, actionable plans</li>
                <li>Learning to ask better questions and refining your thinking</li>
                <li>Working through complex problems without being overwhelmed</li>
                <li>Getting structured help matched to your experience level</li>
              </ul>

              <h4>How Lumon works</h4>
              <ul>
                <li>Remembers your goals, context, and preferences across all sessions</li>
                <li>Teaches you how to prompt more effectively as you go</li>
                <li>Provides quick, honest, and structured responses</li>
                <li>Encourages progress through intentional interaction</li>
              </ul>

              <h4>What Lumon is not</h4>
              <ul>
                <li>A replacement for your judgment or creativity</li>
                <li>A black-box authority that pretends certainty when it doesn't have it</li>
                <li>A generic chatbot optimized for endless conversation</li>
              </ul>

              <p>Lumon is meant to feel less like "talking to an AI" and more like working alongside a calm, thoughtful assistant‚Äîone that helps you move forward with confidence, intention, and the skills to use AI effectively.</p>
            </div>
          </div>

          <button id="onboard-next-1" class="primary-button" type="button">
            Let's Get Started
          </button>
        </div>
      </div>

      <!-- Step 2: Quick Tour -->
      <div id="onboard-step-2" class="onboarding-card onboarding-step hidden">
        <h2 class="onboarding-title">How It Works</h2>
        
        <div class="tour-container">
          <div class="tour-step">
            <div class="tour-number">1</div>
            <h3 class="tour-heading">Start a Conversation</h3>
            <p class="tour-text">Type your question or prompt in the input area at the bottom. Lumon understands natural language and context.</p>
            <div class="tour-arrow">‚Üì</div>
          </div>

          <div class="tour-step">
            <div class="tour-number">2</div>
            <h3 class="tour-heading">Intelligent Responses</h3>
            <p class="tour-text">Get thoughtful, comprehensive answers powered by advanced AI. Your conversation history is always saved.</p>
            <div class="tour-arrow">‚Üì</div>
          </div>

          <div class="tour-step">
            <div class="tour-number">3</div>
            <h3 class="tour-heading">Organize & Iterate</h3>
            <p class="tour-text">Create multiple sessions, pin your favorites, and refine your prompts to get better results.</p>
          </div>
        </div>

        <div class="onboard-nav-buttons">
          <button id="onboard-back-2" class="secondary-button" type="button">Back</button>
          <button id="onboard-next-2" class="primary-button" type="button">Next</button>
        </div>
      </div>

      <!-- Step 3: Setup Profile -->
      <div id="onboard-step-3" class="onboarding-card onboarding-step hidden">
        <h2 class="onboarding-title">Let's Personalize</h2>
        <p class="onboarding-text">
          Help us understand you better so Lumon can adapt to your needs.
        </p>

        <div class="field-group">
          <div class="field-label">Name</div>
          <input
            id="onboard-name"
            class="text-input"
            type="text"
            placeholder="What should Lumon call you?"
          />
        </div>

        <div class="field-group">
          <div class="field-label">Your experience with AI</div>
          <div class="pill-row">
            <button type="button" class="pill-toggle pill-active" data-exp="beginner">
              Beginner
            </button>
            <button type="button" class="pill-toggle" data-exp="comfortable">
              Comfortable
            </button>
            <button type="button" class="pill-toggle" data-exp="advanced">
              Advanced
            </button>
          </div>
        </div>

        <div class="onboard-nav-buttons">
          <button id="onboard-back-3" class="secondary-button" type="button">Back</button>
          <button id="onboard-continue" class="primary-button" type="button">
            Start Using Lumon
          </button>
        </div>

        <p class="onboarding-footnote">
          Your profile is stored locally in this browser so Lumon can adapt to you.
        </p>
      </div>
    </section>

    <!-- Chat screen -->
    <section id="chat-screen" class="chat-screen hidden">
      <!-- Per-session problem setup -->
      <div id="session-setup" class="session-setup hidden">
        <div class="session-card">
          <div class="session-label">Session focus</div>
          <h2 class="session-title">What are we working on in this Lumon session?</h2>

          <div class="field-group">
            <div class="field-label">Main problem</div>
            <input
              id="session-problem"
              class="text-input"
              type="text"
              placeholder="e.g. Finish my college essay, fix my sleep schedule, land a better job"
            />
          </div>

          <div class="field-group">
            <div class="field-label">Why this matters</div>
            <input
              id="session-why"
              class="text-input"
              type="text"
              placeholder="e.g. This is for my dream school and I feel stuck."
            />
          </div>

          <div class="session-row">
            <div class="field-group">
              <div class="field-label">Time horizon</div>
              <select id="session-time" class="text-input session-select">
                <option value="today">Today</option>
                <option value="this_week">This week</option>
                <option value="this_month">This month</option>
                <option value="later">Later</option>
              </select>
            </div>

            <div class="field-group">
              <div class="field-label">Confidence with this topic</div>
              <div class="pill-row session-pill-row">
                <button
                  type="button"
                  class="pill-toggle session-pill pill-active"
                  data-level="beginner"
                >
                  Beginner
                </button>
                <button
                  type="button"
                  class="pill-toggle session-pill"
                  data-level="comfortable"
                >
                  Comfortable
                </button>
                <button
                  type="button"
                  class="pill-toggle session-pill"
                  data-level="advanced"
                >
                  Advanced
                </button>
              </div>
            </div>
          </div>

          <button id="session-save" class="primary-button session-save-btn" type="button">
            Save session &amp; start
          </button>

          <button id="session-skip-btn" class="primary-button" type="button" style="margin-left: 6px; background: #f5eadd; color: #2b2117; box-shadow: none; border: 1px solid var(--border-subtle);">
            Skip
          </button>

          <button id="session-extended-btn" class="primary-button" type="button" style="margin-left: auto; margin-top: 10px;">
            Extended Customizations
          </button>
        </div>
      </div>

      <div id="chat-log" class="chat-log"></div>

      <!-- Tutorial Prompt Modal -->
      <div id="tutorial-prompt-modal" class="tutorial-modal hidden">
        <div class="tutorial-backdrop"></div>
        <div class="tutorial-prompt-content">
          <div class="tutorial-prompt-header">
            <h2>Welcome to Lumon! üëã</h2>
          </div>
          <div class="tutorial-prompt-body">
            <p>Would you like a quick tutorial to get the most out of Lumon?</p>
            <p class="tutorial-prompt-time">Takes about 2-3 minutes</p>
          </div>
          <div class="tutorial-prompt-buttons">
            <button id="tutorial-no-btn" class="tutorial-secondary-btn" type="button">No thanks</button>
            <button id="tutorial-yes-btn" class="tutorial-primary-btn" type="button">Yes, show me</button>
          </div>
        </div>
      </div>

      <!-- Tutorial Steps Modal -->
      <div id="tutorial-steps-modal" class="tutorial-modal hidden">
        <div class="tutorial-backdrop"></div>
        <div class="tutorial-steps-content">
          <div class="tutorial-steps-header">
            <h2 id="tutorial-step-title">Let's get started</h2>
            <button id="tutorial-steps-close" class="tutorial-steps-close" type="button">‚úï</button>
          </div>

          <div class="tutorial-steps-body">
            <!-- Step 1: Input -->
            <div class="tutorial-step tutorial-step-1 active">
              <div class="tutorial-step-number">1 of 4</div>
              <h3>Type your first prompt</h3>
              <p>Click in the input box at the bottom and ask Lumon anything. Be specific for better results.</p>
              <div class="tutorial-arrow-down">‚Üì</div>
            </div>

            <!-- Step 2: Submit -->
            <div class="tutorial-step tutorial-step-2">
              <div class="tutorial-step-number">2 of 4</div>
              <h3>Send your message</h3>
              <p>Press Enter or click the send button. Lumon will respond with thoughtful, structured help.</p>
              <div class="tutorial-arrow-up">‚Üë</div>
            </div>

            <!-- Step 3: Customization -->
            <div class="tutorial-step tutorial-step-3">
              <div class="tutorial-step-number">3 of 4</div>
              <h3>Customize your experience</h3>
              <p>Click "Extended Customizations" to tell Lumon how you like to work. It remembers your preferences.</p>
              <div class="tutorial-arrow-up">‚Üë</div>
            </div>

            <!-- Step 4: Sessions -->
            <div class="tutorial-step tutorial-step-4">
              <div class="tutorial-step-number">4 of 4</div>
              <h3>Organize your work</h3>
              <p>Create multiple sessions, pin your favorites, and Lumon remembers everything across sessions. You've got this!</p>
            </div>
          </div>

          <div class="tutorial-steps-footer">
            <button id="tutorial-prev-btn" class="tutorial-nav-btn" type="button">‚Üê Back</button>
            <div class="tutorial-dots">
              <span class="tutorial-dot active" data-step="1"></span>
              <span class="tutorial-dot" data-step="2"></span>
              <span class="tutorial-dot" data-step="3"></span>
              <span class="tutorial-dot" data-step="4"></span>
            </div>
            <button id="tutorial-next-btn" class="tutorial-nav-btn" type="button">Next ‚Üí</button>
          </div>

          <div class="tutorial-skip-link">
            <button id="tutorial-skip-btn" type="button">Skip tutorial</button>
          </div>
        </div>
      </div>

      <!-- Extended Customizations Modal (PREMIUM) -->
      <div id="extended-modal" class="extended-modal hidden">
        <div class="extended-modal-backdrop"></div>
        <div class="extended-modal-content">
          <div class="extended-modal-header">
            <h3 class="extended-modal-title">‚≠ê Premium Customizations</h3>
            <button id="extended-modal-close" class="extended-modal-close" type="button">‚úï</button>
          </div>
          
          <div class="extended-modal-body">
            <!-- Session Depth & Focus -->
            <div class="extended-section">
              <div class="extended-label">How deep do you want to go?</div>
              <div class="extended-row">
                <button class="extended-chip" data-depth="shallow" type="button">Quick fix</button>
                <button class="extended-chip extended-chip-active" data-depth="medium" type="button">Balanced</button>
                <button class="extended-chip" data-depth="deep" type="button">Deep dive</button>
              </div>
              <div class="extended-hint">Shallow = quick answers. Deep = thorough exploration.</div>
            </div>

            <!-- Assistance & Guidance Level -->
            <div class="extended-section">
              <div class="extended-label">How much hand-holding do you need?</div>
              <div class="extended-row">
                <button class="extended-chip" data-assist="minimal" type="button">Challenge me</button>
                <button class="extended-chip extended-chip-active" data-assist="balanced" type="button">Balanced</button>
                <button class="extended-chip" data-assist="comprehensive" type="button">Guide me</button>
              </div>
              <div class="extended-hint">Challenge = fewer hints. Guide = step-by-step.</div>
            </div>

            <!-- Focus Areas (Multi-select) -->
            <div class="extended-section">
              <div class="extended-label">What should I focus on? (select all that apply)</div>
              <div class="extended-checkbox-group">
                <label class="extended-checkbox-label">
                  <input type="checkbox" class="extended-checkbox" data-focus="clarity" />
                  Clarity of thinking & logic
                </label>
                <label class="extended-checkbox-label">
                  <input type="checkbox" class="extended-checkbox" data-focus="structure" />
                  Structure & organization
                </label>
                <label class="extended-checkbox-label">
                  <input type="checkbox" class="extended-checkbox" data-focus="emotion" />
                  Emotional & psychological angles
                </label>
                <label class="extended-checkbox-label">
                  <input type="checkbox" class="extended-checkbox" data-focus="practical" />
                  Practical next steps & action
                </label>
                <label class="extended-checkbox-label">
                  <input type="checkbox" class="extended-checkbox" data-focus="perspective" />
                  Different perspectives & viewpoints
                </label>
              </div>
            </div>

            <!-- Knowledge Level -->
            <div class="extended-section">
              <div class="extended-label">Your knowledge level on this topic</div>
              <div class="extended-row">
                <button class="extended-chip" data-knowledge="novice" type="button">Brand new</button>
                <button class="extended-chip" data-knowledge="familiar" type="button">Some exposure</button>
                <button class="extended-chip extended-chip-active" data-knowledge="experienced" type="button">Pretty familiar</button>
                <button class="extended-chip" data-knowledge="expert" type="button">I know a lot</button>
              </div>
            </div>

            <!-- Communication Style -->
            <div class="extended-section">
              <div class="extended-label">How would you like me to communicate?</div>
              <div class="extended-checkbox-group">
                <label class="extended-checkbox-label">
                  <input type="checkbox" class="extended-checkbox" data-style="formal" />
                  More formal & professional
                </label>
                <label class="extended-checkbox-label">
                  <input type="checkbox" class="extended-checkbox" data-style="casual" checked />
                  Casual & conversational
                </label>
                <label class="extended-checkbox-label">
                  <input type="checkbox" class="extended-checkbox" data-style="analytical" />
                  Data-driven & analytical
                </label>
                <label class="extended-checkbox-label">
                  <input type="checkbox" class="extended-checkbox" data-style="creative" />
                  Creative & imaginative
                </label>
              </div>
            </div>

            <!-- Time Constraint -->
            <div class="extended-section">
              <div class="extended-label">How much time do you have?</div>
              <div class="extended-row">
                <button class="extended-chip" data-timeframe="5min" type="button">5 min</button>
                <button class="extended-chip extended-chip-active" data-timeframe="15min" type="button">15 min</button>
                <button class="extended-chip" data-timeframe="30min" type="button">30 min</button>
                <button class="extended-chip" data-timeframe="unlimited" type="button">As long as needed</button>
              </div>
            </div>

            <!-- External Constraints (Text input) -->
            <div class="extended-section">
              <div class="extended-label">Any constraints or limitations?</div>
              <textarea 
                id="extended-constraints-input" 
                class="extended-textarea" 
                placeholder="e.g., Limited budget ($500), No access to equipment, Working with limited team, etc."
                maxlength="200"
              ></textarea>
              <div class="extended-char-count"><span id="extended-char-count">0</span>/200</div>
            </div>

            <!-- Past Attempts (Text input) -->
            <div class="extended-section">
              <div class="extended-label">What have you already tried?</div>
              <textarea 
                id="extended-tried-input" 
                class="extended-textarea" 
                placeholder="e.g., Tried asking friends, read 3 articles, attempted approach X but it failed, etc."
                maxlength="250"
              ></textarea>
              <div class="extended-char-count"><span id="extended-tried-count">0</span>/250</div>
            </div>

            <!-- Success Criteria (Text input) -->
            <div class="extended-section">
              <div class="extended-label">How will you know you've succeeded?</div>
              <textarea 
                id="extended-success-input" 
                class="extended-textarea" 
                placeholder="e.g., I'll have a clear action plan, I'll feel more confident, I'll solve X problem, etc."
                maxlength="200"
              ></textarea>
              <div class="extended-char-count"><span id="extended-success-count">0</span>/200</div>
            </div>

            <!-- Preferred Examples -->
            <div class="extended-section">
              <div class="extended-label">Would examples be helpful?</div>
              <div class="extended-row">
                <button class="extended-chip extended-chip-active" data-examples="yes" type="button">Yes, lots</button>
                <button class="extended-chip" data-examples="few" type="button">A few</button>
                <button class="extended-chip" data-examples="no" type="button">Skip them</button>
              </div>
            </div>

          </div>

          <div class="extended-modal-footer">
            <button id="extended-reset-btn" class="extended-btn-secondary" type="button">Reset</button>
            <button id="extended-save-btn" class="primary-button" type="button">Save & apply</button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Input bar -->
  <footer id="chat-input-bar" class="chat-input-bar hidden">
    <!-- NEW: Quick Picks bar (slides out from top) -->
    <div id="quick-picks-bar" class="quick-picks-bar hidden"></div>
    
    <div class="chat-input-inner">
      <div class="input-wrapper">
        <button id="mode-menu-btn" class="mode-menu-btn" type="button" title="Open menu">‚ú®</button>
        <div style="width: 100%;">
          <div id="attachment-preview"></div>
          <textarea
            id="user-input"
            rows="1"
            placeholder="What's on your mind?"
          ></textarea>
        </div>
        <div id="mode-menu" class="mode-menu hidden">
          <button class="mode-menu-item" id="quick-picks-btn" type="button">‚ú® Quick Picks</button>
          <button class="mode-menu-item" id="connect-files-btn" type="button">üìé Connect Files</button>
        </div>
      </div>
      <button id="send-button" type="button">‚û§</button>
    </div>
  </footer>

  <!-- Image Lightbox Modal -->
  <div id="image-lightbox" class="image-lightbox hidden">
    <div class="lightbox-overlay"></div>
    <div class="lightbox-container">
      <button class="lightbox-close" type="button">‚úï</button>
      <div class="lightbox-controls">
        <button class="lightbox-zoom-out" type="button" title="Zoom out">‚àí</button>
        <span class="lightbox-zoom-level">100%</span>
        <button class="lightbox-zoom-in" type="button" title="Zoom in">+</button>
      </div>
      <div class="lightbox-content">
        <img id="lightbox-image" src="" alt="Full size image">
      </div>
    </div>
  </div>

  <script src="app.js" defer></script>
</body>
</html>
